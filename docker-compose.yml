services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: text-viewer
    ports:
      - "3200:3200"
      - "3100:3100"
    volumes:
      - ./files:/web_files:ro
    environment:
      - ACCESS_PASSWORD=${ACCESS_PASSWORD:-666666}
      - SESSION_SECRET=${SESSION_SECRET:-f379eaf3c831b04de153469d1bec345e}
      - AUTH_ENABLED=${AUTH_ENABLED:-true}
      - ENABLE_LOCAL_FS=${ENABLE_LOCAL_FS:-true}
      - COOKIE_SECURE=${COOKIE_SECURE:-false}
      - LOG_LEVEL=${LOG_LEVEL:-info}
      - NODE_ENV=${NODE_ENV:-production}
      - PROJECT_NAME=${PROJECT_NAME:-text_viewer}
      - GIT_REPO_URL=${GIT_REPO_URL}
      - GIT_BRANCH=${GIT_BRANCH:-main}
      - PNPM_REGISTRY=${PNPM_REGISTRY:-https://registry.npmmirror.com}
    restart: unless-stopped
